<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open CASCADE Technology: OCAF: Usage Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Open CASCADE Technology"/>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="occ_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open CASCADE Technology
   &#160;<span id="projectnumber">7.8.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('samples__ocaf.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OCAF: Usage Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md10"></a>
Getting Started</h1>
<p>At the beginning of your development, you first define an application class by inheriting from the Application abstract class. You only have to create and determine the resources of the application for specifying the format of your documents (you generally use the standard one) and their file extension.</p>
<p>Then, you design the application data model by organizing attributes you choose among those provided with OCAF. You can specialize these attributes using the User attribute. For example, if you need a reflection coefficient, you aggregate a User attribute identified as a reflection coefficient with a Real attribute containing the value of the coefficient (as such, you don't define a new class).</p>
<p>If you need application specific data not provided with OCAF, for example, to incorporate a finite element model in the data structure, you define a new attribute class containing the mesh, and you include its persistent homologue in a new file format.</p>
<p>Once you have implemented the commands which create and modify the data structure according to your specification, OCAF provides you, without any additional programming:</p>
<ul>
<li>Persistent reference to any data, including geometric elements - several documents can be linked with such reference;</li>
<li>Document-View association;</li>
<li>Ready-to-use functions such as:<ul>
<li>Undo-redo;</li>
<li>Save and open application data.</li>
</ul>
</li>
</ul>
<p>Finally, you develop the application's graphical user interface using the toolkit of your choice, for example:</p><ul>
<li>KDE Qt or GNOME GTK+ on Linux;</li>
<li>Microsoft Foundation Classes (MFC) on Windows Motif on Sun;</li>
<li>Other commercial products such as Ilog Views.</li>
</ul>
<p>You can also implement the user interface in the Java language using the Swing-based Java Application Desktop component (JAD) provided with OCAF.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
An example of OCAF usage</h1>
<p>To create a useful OCAF-based application, it is necessary to redefine two deferred methods: <em>Formats</em> and <em>ResourcesName</em></p>
<p>In the <em>Formats</em> method, add the format of the documents, which need to be read by the application and may have been built in other applications.</p>
<p>For example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> myApplication::Formats(TColStd_SequenceOfExtendedString&amp; Formats)</div>
<div class="line">{</div>
<div class="line">  Formats.Append(TCollection_ExtendedString (<span class="stringliteral">&quot;OCAF-myApplication&quot;</span>));</div>
<div class="line">}</div>
</div><!-- fragment --><p>In the <em>ResourcesName</em> method, you only define the name of the resource file. This file contains several definitions for the saving and opening mechanisms associated with each format and calling of the plug-in file.</p>
<div class="fragment"><div class="line">Standard_CString myApplication::ResourcesName()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> Standard_CString (<span class="stringliteral">&quot;Resources&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>To obtain the saving and opening mechanisms, it is necessary to set two environment variables: <em>CSF_PluginDefaults</em>, which defines the path of the plug-in file, and <em>CSF_ResourcesDefault</em>, which defines the resource file:</p>
<div class="fragment"><div class="line">SetEnvironmentVariable (<span class="stringliteral">&quot;CSF_ResourcesDefaults&quot;</span>, myDirectory);</div>
<div class="line">SetEnvironmentVariable (<span class="stringliteral">&quot;CSF_PluginDefaults&quot;</span>, myDirectory);</div>
</div><!-- fragment --><p>The plugin and the resource files of the application will be located in <em>myDirector</em>. The name of the plugin file must be <em>Plugin</em>.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Resource File</h2>
<p>The resource file describes the documents (type and extension) and the type of data that the application can manipulate by identifying the storage and retrieval drivers appropriate for this data.</p>
<p>Each driver is unique and identified by a GUID generated, for example, with the <em>uuidgen</em> tool in Windows.</p>
<p>Five drivers are required to use all standard attributes provided within OCAF:</p>
<ul>
<li>the schema driver (ad696002-5b34-11d1-b5ba-00a0c9064368)</li>
<li>the document storage driver (ad696000-5b34-11d1-b5ba-00a0c9064368)</li>
<li>the document retrieval driver (ad696001-5b34-11d1-b5ba-00a0c9064368)</li>
<li>the attribute storage driver (47b0b826-d931-11d1-b5da-00a0c9064368)</li>
<li>the attribute retrieval driver (47b0b827-d931-11d1-b5da-00a0c9064368)</li>
</ul>
<p>These drivers are provided as plug-ins and are located in the <em>PappStdPlugin</em> library.</p>
<p>For example, this is a resource file, which declares a new model document OCAF-MyApplication:</p>
<div class="fragment"><div class="line">formatlist:OCAF-MyApplication</div>
<div class="line">OCAF-MyApplication.Description: MyApplication Document Version 1.0</div>
<div class="line">OCAF-MyApplication.FileExtension: sta</div>
<div class="line">OCAF-MyApplication.StoragePlugin: ad696000-5b34-11d1-b5ba-00a0c9064368</div>
<div class="line">OCAF-MyApplication.RetrievalPlugin: ad696001-5b34-11d1-b5ba-00a0c9064368</div>
<div class="line">OCAF-MyApplicationSchema: ad696002-5b34-11d1-b5ba-00a0c9064368</div>
<div class="line">OCAF-MyApplication.AttributeStoragePlugin: 47b0b826-d931-11d1-b5da-00a0c9064368</div>
<div class="line">OCAF-MyApplication.AttributeRetrievalPlugin: 47b0b827-d931-11d1-b5da-00a0c9064368</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Plugin File</h2>
<p>The plugin file describes the list of required plug-ins to run the application and the libraries in which plug-ins are located.</p>
<p>You need at least the <em>FWOSPlugin</em> and the plug-in drivers to run an OCAF application.</p>
<p>The syntax of each item is <em>Identification.Location Library_Name</em>, where:</p><ul>
<li>Identification is GUID.</li>
<li>Location defines the location of the Identification (where its definition is found).</li>
<li>Library_Name is the name (and path to) the library, where the plug-in is located.</li>
</ul>
<p>For example, this is a Plugin file:</p>
<div class="fragment"><div class="line">a148e300-5740-11d1-a904-080036aaa103.Location: FWOSPlugin</div>
<div class="line">! base document drivers plugin</div>
<div class="line">ad696000-5b34-11d1-b5ba-00a0c9064368.Location: PAppStdPlugin</div>
<div class="line">ad696001-5b34-11d1-b5ba-00a0c9064368.Location: PAppStdPlugin</div>
<div class="line">ad696002-5b34-11d1-b5ba-00a0c9064368.Location: PAppStdPlugin</div>
<div class="line">47b0b826-d931-11d1-b5da-00a0c9064368.Location: PAppStdPlugin</div>
<div class="line">47b0b827-d931-11d1-b5da-00a0c9064368.Location: PAppStdPlugin</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md14"></a>
Implementation of Attribute Transformation in a HXX file</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;TDF_Attribute.hxx&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;gp_Ax3.hxx&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;gp_Pnt.hxx&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;gp_Vec.hxx&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;gp_Trsf.hxx&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">//! This attribute implements a transformation data container</span></div>
<div class="line"><span class="comment"></span><span class="keyword">class </span>MyPackage_Transformation : <span class="keyword">public</span> TDF_Attribute</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>: <span class="comment">//!@ name Static methods</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method returns a unique GUID of this attribute.</span></div>
<div class="line"><span class="comment">  //! By means of this GUID this attribute may be identified</span></div>
<div class="line"><span class="comment">  //! among other attributes attached to the same label.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keyword">static</span> <span class="keyword">const</span> Standard_GUID&amp; GetID ();</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! Finds or creates the attribute attached to &lt;theLabel&gt;.</span></div>
<div class="line"><span class="comment">  //! The found or created attribute is returned.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keyword">static</span> Handle(MyPackage_Transformation) Set (<span class="keyword">const</span> TDF_Label theLabel);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>: <span class="comment">//!@ name Methods for access to the attribute data</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method returns the transformation.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT gp_Trsf Get () <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>: <span class="comment">//!@ name Methods for setting the data of transformation</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a rotation type of transformation.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetRotation (<span class="keyword">const</span> gp_Ax1&amp; theAxis, Standard_Real theAngle);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a translation type of transformation.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetTranslation (<span class="keyword">const</span> gp_Vec&amp; theVector);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a point mirror type of transformation (point symmetry).</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetMirror (<span class="keyword">const</span> gp_Pnt&amp; thePoint);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines an axis mirror type of transformation (axial symmetry).</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetMirror (<span class="keyword">const</span> gp_Ax1&amp; theAxis);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a point mirror type of transformation (planar symmetry).</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetMirror (<span class="keyword">const</span> gp_Ax2&amp; thePlane);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a scale type of transformation.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetScale (<span class="keyword">const</span> gp_Pnt&amp; thePoint, Standard_Real theScale);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method defines a complex type of transformation from one coordinate system to another.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> SetTransformation (<span class="keyword">const</span> gp_Ax3&amp; theCoordinateSystem1, <span class="keyword">const</span> gp_Ax3&amp; theCoordinateSystem2);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>: <span class="comment">//!@ name Overridden methods from TDF_Attribute</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method returns a unique GUID of the attribute.</span></div>
<div class="line"><span class="comment">  //! By means of this GUID this attribute may be identified among other attributes attached to the same label.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keyword">const</span> Standard_GUID&amp; ID () <span class="keyword">const</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method is called on Undo / Redo.</span></div>
<div class="line"><span class="comment">  //! It copies the content of theAttribute into this attribute (copies the fields).</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> Restore (<span class="keyword">const</span> Handle(TDF_Attribute)&amp; theAttribute);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! It creates a new instance of this attribute.</span></div>
<div class="line"><span class="comment">  //! It is called on Copy / Paste, Undo / Redo.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT Handle(TDF_Attribute) NewEmpty () <span class="keyword">const</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The method is called on Copy / Paste.</span></div>
<div class="line"><span class="comment">  //! It copies the content of this attribute into theAttribute (copies the fields).</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT <span class="keywordtype">void</span> Paste (<span class="keyword">const</span> Handle(TDF_Attribute)&amp; theAttribute, <span class="keyword">const</span> Handle(TDF_RelocationTable)&amp; theRelocationTable);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! Prints the content of this attribute into the stream.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT Standard_OStream&amp; Dump(Standard_OStream&amp; theOS);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>: <span class="comment">//!@ name Constructor</span></div>
<div class="line"><span class="comment"></span><span class="comment"></span> </div>
<div class="line"><span class="comment">  //! The C++ constructor of this attribute class.</span></div>
<div class="line"><span class="comment">  //! Usually it is never called outside this class.</span></div>
<div class="line"><span class="comment"></span>  Standard_EXPORT MyPackage_Transformation();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">  gp_TrsfForm myType;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Axes (Ax1, Ax2, Ax3)</span></div>
<div class="line">  gp_Ax1 myAx1;</div>
<div class="line">  gp_Ax2 myAx2;</div>
<div class="line">  gp_Ax3 myFirstAx3;</div>
<div class="line">  gp_Ax3 mySecondAx3;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Scalar values</span></div>
<div class="line">  Standard_Real myAngle;</div>
<div class="line">  Standard_Real myScale;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Points</span></div>
<div class="line">  gp_Pnt myFirstPoint;</div>
<div class="line">  gp_Pnt mySecondPoint;</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15"></a>
Implementation of Attribute Transformation in a CPP file</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;MyPackage_Transformation.hxx&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : GetID</span></div>
<div class="line"><span class="comment">//purpose  : The method returns a unique GUID of this attribute.</span></div>
<div class="line"><span class="comment">//           By means of this GUID this attribute may be identified</span></div>
<div class="line"><span class="comment">//           among other attributes attached to the same label.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keyword">const</span> Standard_GUID&amp; MyPackage_Transformation::GetID()</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">static</span> Standard_GUID ID(<span class="stringliteral">&quot;4443368E-C808-4468-984D-B26906BA8573&quot;</span>);</div>
<div class="line">  <span class="keywordflow">return</span> ID;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : Set</span></div>
<div class="line"><span class="comment">//purpose  : Finds or creates the attribute attached to &lt;theLabel&gt;.</span></div>
<div class="line"><span class="comment">//           The found or created attribute is returned.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line">Handle(MyPackage_Transformation) MyPackage_Transformation::Set(<span class="keyword">const</span> TDF_Label&amp; theLabel)</div>
<div class="line">{</div>
<div class="line">  Handle(MyPackage_Transformation) T;</div>
<div class="line">  <span class="keywordflow">if</span> (!theLabel.FindAttribute(MyPackage_Transformation::GetID(), T))</div>
<div class="line">  {</div>
<div class="line">    T = <span class="keyword">new</span> MyPackage_Transformation();</div>
<div class="line">    theLabel.AddAttribute(T);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> T;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : Get</span></div>
<div class="line"><span class="comment">//purpose  : The method returns the transformation.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line">gp_Trsf MyPackage_Transformation::Get()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">  gp_Trsf transformation;</div>
<div class="line">  <span class="keywordflow">switch</span> (myType)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">case</span> gp_Identity:</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Rotation:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetRotation(myAx1, myAngle);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Translation:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetTranslation(myFirstPoint, mySecondPoint);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_PntMirror:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetMirror(myFirstPoint);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Ax1Mirror:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetMirror(myAx1);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Ax2Mirror:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetMirror(myAx2);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Scale:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetScale(myFirstPoint, myScale);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_CompoundTrsf:</div>
<div class="line">    {</div>
<div class="line">      transformation.SetTransformation(myFirstAx3, mySecondAx3);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Other:</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> transformation;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetRotation</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a rotation type of transformation.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetRotation(<span class="keyword">const</span> gp_Ax1&amp; theAxis, <span class="keyword">const</span> Standard_Real theAngle)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_Rotation;</div>
<div class="line">  myAx1 = theAxis;</div>
<div class="line">  myAngle = theAngle;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetTranslation</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a translation type of transformation.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetTranslation(<span class="keyword">const</span> gp_Vec&amp; theVector)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_Translation;</div>
<div class="line">  myFirstPoint.SetCoord(0, 0, 0);</div>
<div class="line">  mySecondPoint.SetCoord(theVector.X(), theVector.Y(), theVector.Z());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetMirror</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a point mirror type of transformation</span></div>
<div class="line"><span class="comment">//           (point symmetry).</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetMirror(<span class="keyword">const</span> gp_Pnt&amp; thePoint)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_PntMirror;</div>
<div class="line">  myFirstPoint = thePoint;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetMirror</span></div>
<div class="line"><span class="comment">//purpose  : The method defines an axis mirror type of transformation</span></div>
<div class="line"><span class="comment">//           (axial symmetry).</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetMirror(<span class="keyword">const</span> gp_Ax1&amp; theAxis)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_Ax1Mirror;</div>
<div class="line">  myAx1 = theAxis;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetMirror</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a point mirror type of transformation</span></div>
<div class="line"><span class="comment">//           (planar symmetry).</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetMirror(<span class="keyword">const</span> gp_Ax2&amp; thePlane)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_Ax2Mirror;</div>
<div class="line">  myAx2 = thePlane;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetScale</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a scale type of transformation.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetScale(<span class="keyword">const</span> gp_Pnt&amp; thePoint, <span class="keyword">const</span> Standard_Real theScale)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myType = gp_Scale;</div>
<div class="line">  myFirstPoint = thePoint;</div>
<div class="line">  myScale = theScale;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : SetTransformation</span></div>
<div class="line"><span class="comment">//purpose  : The method defines a complex type of transformation</span></div>
<div class="line"><span class="comment">//           from one coordinate system to another</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::SetTransformation (<span class="keyword">const</span> gp_Ax3&amp; theCoordinateSystem1,</div>
<div class="line">                                                  <span class="keyword">const</span> gp_Ax3&amp; theCoordinateSystem2)</div>
<div class="line">{</div>
<div class="line">  Backup();</div>
<div class="line">  myFirstAx3 = theCoordinateSystem1;</div>
<div class="line">  mySecondAx3 = theCoordinateSystem2;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : ID</span></div>
<div class="line"><span class="comment">//purpose  : The method returns a unique GUID of the attribute.</span></div>
<div class="line"><span class="comment">//           By means of this GUID this attribute may be identified</span></div>
<div class="line"><span class="comment">//           among other attributes attached to the same label.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keyword">const</span> Standard_GUID&amp; MyPackage_Transformation::ID()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">  <span class="keywordflow">return</span> GetID();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : Restore</span></div>
<div class="line"><span class="comment">//purpose  : The method is called on Undo / Redo.</span></div>
<div class="line"><span class="comment">//           It copies the content of &lt;theAttribute&gt;</span></div>
<div class="line"><span class="comment">//           into this attribute (copies the fields).</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::Restore(<span class="keyword">const</span> Handle(TDF_Attribute)&amp; theAttribute)</div>
<div class="line">{</div>
<div class="line">  Handle(MyPackage_Transformation) theTransformation = Handle(MyPackage_Transformation)::DownCast(theAttribute);</div>
<div class="line">  myType = theTransformation-&gt;myType;</div>
<div class="line">  myAx1 = theTransformation-&gt;myAx1;</div>
<div class="line">  myAx2 = theTransformation-&gt;myAx2;</div>
<div class="line">  myFirstAx3 = theTransformation-&gt;myFirstAx3;</div>
<div class="line">  mySecondAx3 = theTransformation-&gt;mySecondAx3;</div>
<div class="line">  myAngle = theTransformation-&gt;myAngle;</div>
<div class="line">  myScale = theTransformation-&gt;myScale;</div>
<div class="line">  myFirstPoint = theTransformation-&gt;myFirstPoint;</div>
<div class="line">  mySecondPoint = theTransformation-&gt;mySecondPoint;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : NewEmpty</span></div>
<div class="line"><span class="comment">//purpose  : It creates a new instance of this attribute.</span></div>
<div class="line"><span class="comment">//           It is called on Copy / Paste, Undo / Redo.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line">Handle(TDF_Attribute) MyPackage_Transformation::NewEmpty()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">new</span> MyPackage_Transformation();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : Paste</span></div>
<div class="line"><span class="comment">//purpose  : The method is called on Copy / Paste.</span></div>
<div class="line"><span class="comment">//           It copies the content of this attribute into</span></div>
<div class="line"><span class="comment">//           &lt;theAttribute&gt; (copies the fields).</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="keywordtype">void</span> MyPackage_Transformation::Paste (<span class="keyword">const</span> Handle(TDF_Attribute)&amp; theAttribute,</div>
<div class="line">                                      <span class="keyword">const</span> Handle(TDF_RelocationTable)&amp; )<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">  Handle(MyPackage_Transformation) theTransformation = Handle(MyPackage_Transformation)::DownCast(theAttribute);</div>
<div class="line">  theTransformation-&gt;myType = myType;</div>
<div class="line">  theTransformation-&gt;myAx1 = myAx1;</div>
<div class="line">  theTransformation-&gt;myAx2 = myAx2;</div>
<div class="line">  theTransformation-&gt;myFirstAx3 = myFirstAx3;</div>
<div class="line">  theTransformation-&gt;mySecondAx3 = mySecondAx3;</div>
<div class="line">  theTransformation-&gt;myAngle = myAngle;</div>
<div class="line">  theTransformation-&gt;myScale = myScale;</div>
<div class="line">  theTransformation-&gt;myFirstPoint = myFirstPoint;</div>
<div class="line">  theTransformation-&gt;mySecondPoint = mySecondPoint;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : Dump</span></div>
<div class="line"><span class="comment">//purpose  : Prints the content of this attribute into the stream.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line">Standard_OStream&amp; MyPackage_Transformation::Dump(Standard_OStream&amp; theOS)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">  anOS &lt;&lt; <span class="stringliteral">&quot;Transformation: &quot;</span>;</div>
<div class="line">  <span class="keywordflow">switch</span> (myType)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">case</span> gp_Identity:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Identity&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Rotation:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Rotation&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Translation:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Translation&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_PntMirror:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_PntMirror&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Ax1Mirror:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Ax1Mirror&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Ax2Mirror:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Ax2Mirror&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Scale:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Scale&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_CompoundTrsf:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_CompoundTrsf&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">case</span> gp_Other:</div>
<div class="line">    {</div>
<div class="line">      anOS &lt;&lt; <span class="stringliteral">&quot;gp_Other&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> anOS;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line"><span class="comment">//function : MyPackage_Transformation</span></div>
<div class="line"><span class="comment">//purpose  : A constructor.</span></div>
<div class="line"><span class="comment">//=======================================================================</span></div>
<div class="line">MyPackage_Transformation::MyPackage_Transformation()</div>
<div class="line">: myType (gp_Identity)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md16"></a>
Implementation of typical actions with standard OCAF attributes.</h1>
<p>There are four sample files provided in the directory 'OpenCasCade/ros/samples/ocafsamples'. They present typical actions with OCAF services (mainly for newcomers). The method <em>Sample()</em> of each file is not dedicated for execution 'as is', it is rather a set of logical actions using some OCAF services.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
TDataStd_Sample.cxx</h2>
<p>This sample contains templates for typical actions with the following standard OCAF attributes:</p><ul>
<li>Starting with data framework;</li>
<li>TDataStd_Integer attribute management;</li>
<li>TDataStd_RealArray attribute management;</li>
<li>TDataStd_Comment attribute management;</li>
<li>TDataStd_Name attribute management;</li>
<li>TDataStd_UAttribute attribute management;</li>
<li>TDF_Reference attribute management;</li>
<li>TDataXtd_Point attribute management;</li>
<li>TDataXtd_Plane attribute management;</li>
<li>TDataXtd_Axis attribute management;</li>
<li>TDataXtd_Geometry attribute management;</li>
<li>TDataXtd_Constraint attribute management;</li>
<li>TDataStd_Directory attribute management;</li>
<li>TDataStd_TreeNode attribute management.</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
TDocStd_Sample.cxx</h2>
<p>This sample contains template for the following typical actions:</p><ul>
<li>creating application;</li>
<li>creating the new document (document contains a framework);</li>
<li>retrieving the document from a label of its framework;</li>
<li>filling a document with data;</li>
<li>saving a document in the file;</li>
<li>closing a document;</li>
<li>opening the document stored in the file;</li>
<li>copying content of a document to another document with possibility to update the copy in the future.</li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
TPrsStd_Sample.cxx</h2>
<p>This sample contains template for the following typical actions:</p><ul>
<li>starting with data framework;</li>
<li>setting the TPrsStd_AISViewer in the framework;</li>
<li>initialization of aViewer;</li>
<li>finding TPrsStd_AISViewer attribute in the DataFramework;</li>
<li>getting AIS_InteractiveContext from TPrsStd_AISViewer;</li>
<li>adding driver to the map of drivers;</li>
<li>getting driver from the map of drivers;</li>
<li>setting TNaming_NamedShape to &lt;ShapeLabel&gt;;</li>
<li>setting the new TPrsStd_AISPresentation to &lt;ShapeLabel&gt;;</li>
<li>displaying;</li>
<li>erasing;</li>
<li>updating and displaying presentation of the attribute to be displayed;</li>
<li>setting a color to the displayed attribute;</li>
<li>getting transparency of the displayed attribute;</li>
<li>modify attribute;</li>
<li>updating presentation of the attribute in viewer.</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
TNaming_Sample.cxx</h2>
<p>This sample contains template for typical actions with OCAF Topological Naming services. The following scenario is used:</p><ul>
<li>data framework initialization;</li>
<li>creating Box1 and pushing it as PRIMITIVE in DF;</li>
<li>creating Box2 and pushing it as PRIMITIVE in DF;</li>
<li>moving Box2 (applying a transformation);</li>
<li>pushing the selected edges of the top face of Box1 in DF;</li>
<li>creating a Fillet (using the selected edges) and pushing the result as a modification of Box1;</li>
<li>creating a Cut (Box1, Box2) as a modification of Box1 and push it in DF;</li>
<li>recovering the result from DF. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 4 2023 13:54:32 for Open CASCADE Technology by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
